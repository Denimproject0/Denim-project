<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Denim Project â€“ Order System</title>

<style>
body { font-family: Arial; background:#eef0f5; margin:0; }
.container {
    width:92%; max-width:450px; background:white; margin:20px auto;
    padding:20px; border-radius:12px; box-shadow:0 0 10px #ccc;
}
h2 { text-align:center; color:#003399; margin-bottom:20px; }
label { font-weight:bold; display:block; margin-top:12px; }
input, select {
    width:100%; padding:10px; margin-top:6px; font-size:15px;
    border:1px solid #aaa; border-radius:6px;
}
button {
    width:100%; padding:14px; font-size:17px; border:none;
    background:#007bff; color:white; border-radius:8px; margin-top:18px;
}
button.back { background:#444; }
.hidden { display:none; }
.orderBox {
    background:#fff; padding:15px; margin:10px 0;
    border-radius:8px; border:1px solid #ccc;
}
.orderBox h3 { margin:0 0 10px 0; }
.statusBadge {
    padding:5px 10px; border-radius:6px; font-size:14px; color:white;
}
.ready { background:green; }
.process { background:orange; }
.delivered { background:blue; }
</style>

<script>
function show(page){
    document.querySelectorAll(".page").forEach(pg => pg.style.display="none");
    document.getElementById(page).style.display="block";
}

// ---------- STORAGE ----------
function saveOrder(){
    let order = {
        id: document.getElementById("orderId").value,
        name: document.getElementById("custName").value,
        mobile: document.getElementById("custMobile").value,
        orderDate: document.getElementById("orderDate").value,
        trialDate: document.getElementById("trialDate").value,
        finalDate: document.getElementById("finalDate").value,
        remarks: document.getElementById("remarks").value,
        status: "In Process",
        shirt: shirtData,
        jeans: jeansData
    };

    if(order.id === ""){
        alert("Order ID required!");
        return;
    }

    localStorage.setItem("order_"+order.id, JSON.stringify(order));
    alert("Order Saved!");
}

let shirtData = {};
let jeansData = {};

// SHIRT SAVE
function saveShirt(){
    shirtData = {
        chest: sh_chest.value,
        waist: sh_waist.value,
        shoulder: sh_shoulder.value,
        sleeve: sh_sleeve.value,
        length: sh_length.value,
        arm: sh_arm.value,
        bicep: sh_bicep.value,
        cuff: sh_cuff.value,
    };
    alert("Shirt Measurements Saved!");
}

// JEANS SAVE
function saveJeans(){
    jeansData = {
        waist: j_waist.value,
        hip: j_hip.value,
        thigh: j_thigh.value,
        kneeloc: j_kneeloc.value,
        knee: j_knee.value,
        length: j_length.value,
        bottom: j_bottom.value,
        front: j_front.value,
        back: j_back.value,
    };
    alert("Jeans Measurements Saved!");
}

// SEARCH ORDER
function searchOrder(){
    let key = searchKey.value;
    let found = null;

    // Search by Order ID
    if(localStorage.getItem("order_"+key)){
        found = JSON.parse(localStorage.getItem("order_"+key));
    } else {
        // Search by mobile
        for(let i=0; i<localStorage.length; i++){
            let k = localStorage.key(i);
            if(k.startsWith("order_")){
                let o = JSON.parse(localStorage.getItem(k));
                if(o.mobile === key || o.name.toLowerCase() === key.toLowerCase()){
                    found = o;
                    break;
                }
            }
        }
    }

    if(!found){
        alert("Order not found!");
        return;
    }

    result.innerHTML = `
        <div class='orderBox'>
            <h3>Order ID: ${found.id}</h3>
            Name: ${found.name}<br>
            Mobile: ${found.mobile}<br>
            Status: <span class='statusBadge process'>${found.status}</span><br><br>
            <button onclick='loadOrder("${found.id}")'>Open Order</button>
        </div>
    `;
}

function loadOrder(id){
    let o = JSON.parse(localStorage.getItem("order_"+id));

    custName.value = o.name;
    custMobile.value = o.mobile;
    orderId.value = o.id;
    orderDate.value = o.orderDate;
    trialDate.value = o.trialDate;
    finalDate.value = o.finalDate;
    remarks.value = o.remarks;

    // Load shirt
    if(o.shirt){
        sh_chest.value = o.shirt.chest;
        sh_waist.value = o.shirt.waist;
        sh_shoulder.value = o.shirt.shoulder;
        sh_sleeve.value = o.shirt.sleeve;
        sh_length.value = o.shirt.length;
        sh_arm.value = o.shirt.arm;
        sh_bicep.value = o.shirt.bicep;
        sh_cuff.value = o.shirt.cuff;
    }

    // Load jeans
    if(o.jeans){
        j_waist.value = o.jeans.waist;
        j_hip.value = o.jeans.hip;
        j_thigh.value = o.jeans.thigh;
        j_kneeloc.value = o.jeans.kneeloc;
        j_knee.value = o.jeans.knee;
        j_length.value = o.jeans.length;
        j_bottom.value = o.jeans.bottom;
        j_front.value = o.jeans.front;
        j_back.value = o.jeans.back;
    }

    alert("Order Loaded!");
    show('customerPage');
}

// STATUS UPDATE
function updateStatus(){
    let id = orderId.value;
    if(id===""){ alert("Open order first"); return; }

    let o = JSON.parse(localStorage.getItem("order_"+id));
    o.status = document.getElementById("status").value;
    localStorage.setItem("order_"+id, JSON.stringify(o));

    alert("Status Updated");
}
</script>

</head>
<body>

<!-- ---------------- CUSTOMER PAGE ---------------- -->
<div id="customerPage" class="page container">
<h2>Customer Details</h2>

<label>Name</label>
<input id="custName">

<label>Mobile</label>
<input id="custMobile">

<label>Order ID</label>
<input id="orderId">

<label>Order Date</label>
<input type="date" id="orderDate">

<label>Trial Date</label>
<input type="date" id="trialDate">

<label>Final Date</label>
<input type="date" id="finalDate">

<label>Remarks</label>
<input id="remarks">

<label><b>Status</b></label>
<select id="status">
    <option>In Process</option>
    <option>Ready</option>
    <option>Delivered</option>
</select>

<button onclick="updateStatus()">Update Status</button>

<button onclick="show('shirtPage')">Open Shirt Form</button>
<button onclick="show('jeansPage')">Open Jeans Form</button>

<button style="background:green" onclick="saveOrder()">SAVE FULL ORDER</button>
<button style="background:black" onclick="show('searchPage')">Search Orders</button>

</div>

<!-- ---------------- SHIRT PAGE ---------------- -->
<div id="shirtPage" class="page container hidden">
<h2>Shirt / Jacket</h2>

<label>Chest</label><input id="sh_chest">
<label>Waist</label><input id="sh_waist">
<label>Shoulder</label><input id="sh_shoulder">
<label>Sleeve</label><input id="sh_sleeve">
<label>Length</label><input id="sh_length">
<label>Armhole</label><input id="sh_arm">
<label>Bicep</label><input id="sh_bicep">
<label>Cuff</label><input id="sh_cuff">

<button onclick="saveShirt()">Save Shirt Measurements</button>
<button class="back" onclick="show('customerPage')">Back</button>
</div>

<!-- ---------------- JEANS PAGE ---------------- -->
<div id="jeansPage" class="page container hidden">
<h2>Jeans / Trouser</h2>

<label>Waist</label><input id="j_waist">
<label>Hip</label><input id="j_hip">
<label>Thigh</label><input id="j_thigh">

<label>Knee Location</label><input id="j_kneeloc">

<label>Knee</label><input id="j_knee">
<label>Length</label><input id="j_length">
<label>Bottom</label><input id="j_bottom">
<label>Front Rise</label><input id="j_front">
<label>Back Rise</label><input id="j_back">

<button onclick="saveJeans()">Save Jeans Measurements</button>
<button class="back" onclick="show('customerPage')">Back</button>
</div>

<!-- ---------------- SEARCH PAGE ---------------- -->
<div id="searchPage" class="page container hidden">
<h2>Search Order</h2>

<label>Enter Order ID / Mobile / Name</label>
<input id="searchKey">

<button onclick="searchOrder()">Search</button>

<div id="result"></div>

<button class="back" onclick="show('customerPage')">Back</button>
</div>

</body>
</html>
